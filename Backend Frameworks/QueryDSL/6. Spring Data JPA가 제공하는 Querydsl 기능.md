# Spring Data JPA가 지원하는 Querydsl 기능

> 이 기능들은 제약이 커서 테이블이 많은 실무 환경에서 사용하기에는 부적절하다.  
> 그렇지만 어떤 기능이 제공되며, 왜 부족한지도 알아보자.

## 인터페이스 지원 - `QuerydslPredicateExecutor`

```java
public interface QuerydslPredicateExecutor<T> {
    Optional<T> findById(Predicate predicate);

    Iterable<T> findAll(Predicate predicate);

    long count(Predicate predicate);

    boolean exists(Predicate predicate);

    // more functionality omitted.
}
```

- 기존에 작성한 `MemberRepository`가 `QuerydslPredicateExecutor`를 상속하도록 해주자.

```kt
@Repository
interface MemberRepository : JpaRepository<Member, Long>, MemberRepositoryCustom, QuerydslPredicateExecutor<Member> {
    fun findByUsername(username: String): List<Member>
}
```

- 이제 이를 사용하는 코드를 보자.

```kt
@Test
fun querydslPredicateExecutorTest() {
    val result: Iterable<Member> = memberRepository.findAll(
        member.age.between(10, 40).and(member.username.eq("member3"))
    )
    //..
}
```

- Querydsl로 작성한 쿼리 메소드를 사용할 수 있다.

- 하지만 아래와 같은 한계점들이 있다.

  - JOIN이 불가능하다.(묵시적 JOIN은 가능하나, LEFT JOIN은 불가하다.)
  - 클라이언트가 Querydsl에 의존하게 된다. 즉, 서비스 레이어가 Querydsl이라는 Repository Layer의  
    구현 기술에 의존해야 한다.
  - 복잡한 실무 환경에 사용하기에는 한계가 명확하다.

<hr/>
