# Redux-Saga 적용해보기

- 우선 Redux Saga를 사용하려면 당연히 필요한 라이브러리들을 추가해야 한다.  
  아래는 `package.json`에서 Redux-Saga를 필요하기 위해 추가한 의존성 목록이다.

```json
"dependencies": {
    "@reduxjs/toolkit": "^1.6.0",
    "@types/react-redux": "^7.1.16",
    "react-redux": "^7.2.4",
    "redux": "^4.1.0",
    "redux-saga": "^1.1.3",
}
```

<h2>Slice 만들기</h2>

- 이 예시에서는 <a href="https://weatherapi.com">WeatherAPI</a>에서 제공하는 API를 사용해 볼 것이다.  
  우선 Saga의 시작이 되는 Slice를 만들어보자.

- 우선 날씨 정보를 JSON 형식으로 받아오고, 그 JSON 형식에 맞는 인터페이스가 `WeatherResponse`라고 하자.  
  그럼 slice를 만들 때 초기 상태로 지정하기 위한 인터페이스를 만들어보자.

```ts
export interface WeatherState {
  is_loading: boolean;
  data?: WeatherResponse;
}
```

- `WeatherState` 인터페이스에는 로딩 중인지의 유무를 가르키기 위한 is_loading이라는 변수와  
  API 응답값이 온다면 저장될 data라는 변수가 있다.

- 이제 `WeatherState` 형태의 state를 가지는 slice를 만들어보자.

```ts
const initialState: WeatherState = {
  is_loading: true,
};

const weatherSlice = createSlice({
  name: "weather",
  initialState,
  reducers: {
    setLoading(state, action: PayloadAction<boolean>) {
      state.is_loading = action.payload;
    },
    setData(state, action: PayloadAction<WeatherResponse>) {
      state.data = action.payload;
    },
  },
});

export const { setLoading, setData } = weatherSlice.actions;

export default weatherSlice.reducer;
```

- 이름이 weather이며 초기값으로는 `WeatherState` 형식을 가지는 initialState를 가지고,  
  `setLoading()`과 `setData()` 총 2개의 reducer를 가지는 slice를 만들었다.

<hr/>
