# 분해 전략

- 마이크로서비스의 가장 핵심 과제는 **마이크로서비스를 정의하는 방법** 이다.

<h2>마이크로서비스 아키텍쳐란 무엇인가?</h2>

- MSA의 핵심 사상은 **기능 분해**이다. 대규모 단일 애플리케이션을 개발하는 대신 애플리케이션을 여러 개의  
  서비스로 구성하는 것이다. MSA 자체를 기능 분해라고 볼 수도 있지만, 몇 가지 의문점이 생기기 마련이다.

  - MSA는 과의의 소프트웨어 아키텍쳐 개념과 어떤 연관성이 있을까?
  - 서비스란 무엇이고, 그 크기는 어느 정도가 적당할까?

- 소프트웨어 아키텍쳐는 구성 요소 및 그들 간의 의존 관계로 묶인 고수준의 구조물이다.  
  애플리케이션 아키텍쳐는 다차원적이므로 기술하는 방법도 다양하다.  
  아키텍쳐가 중요한 이유는 소프트웨어의 품질 속성, 즉 _~성(~ilities)_ 로 끝나는 지표가  
  아키텍쳐에 의해 결정되기 때문이다. 예전에는 확장성, 신뢰성, 보안 등이 아키텍쳐의 목표였지만  
  이제 신속, 안전하게 소프트웨어를 전달하는 능력도 매우 중요하다.

- MSA는 관리성, 테스트성, 배포성이 높은 애플리케이션을 구축하는 아키텍쳐 스타일이다.

<h3>소프트웨어 아키텍쳐의 정의</h3>

- 소프트웨어 아키텍쳐를 정의하는 문구는 다양하다.  
  그 중, 저자는 아래의 정의를 택했다.

> 컴퓨팅 시스템의 소프트웨어 아키텍쳐는 소프트웨어 엘리먼트(element)와 그들 간의 관계,  
> 그리고 이 둘의 속성(property)으로 구성된 시스템을 추론하는 데 필요한 구조(structure)의 잡합이다.

- 다소 추상적인 문구지만, 핵심은 애플리케이션 아키텍쳐가 여러 부분들(element)로의 분해와 이런 부분들의  
  관계(연관성)이라는 것이다. 분해가 중요한 이유는 다음과 같다.

  - 업무와 지식을 분리한다. 덕분에 전문 지식을 보유한 사람 또는 여러 팀이 함께 생산적으로 애플리케이션  
    작업을 할 수 있다.

  - 소프트웨어 엘리먼트가 어떻게 상호 작용하는지 밝힌다.

<h4>소프트웨어 아키텍쳐의 4+1 뷰 모델</h4>

- 건물과 마찬가지로 애플리케이션 또한 아키텍쳐를 바라보는 관점이 다양하다.

- **4+1 뷰 모델**은 소프트웨어 아키텍쳐를 바라보는 상이한 4개의 뷰를 정의한다.  
  각 뷰는 아키텍쳐의 특정한 측면을 기술하고, 특정 소프트웨어 엘리먼트와 그들 사이의 관계로 구성된다.  
  각 뷰의 목적은 아래와 같다.

  - **논리 뷰(Logical view)** : 개발자가 작성한 소프트웨어 엘리먼트, 객체지향 언어라면 클래스, 패키지가  
    해당되며 결국 상속(inheritance), 연관(association), 의존(depends-on)등 클래스와 패키지의 관계를 의미한다.

  - **구현 뷰(Implementation view)** : 빌드 시스템의 결과물로 모듈(패키징된 코드)과  
    컴포넌트(하나 이상의 모듈로 구성된 실행, 배포 가능 단위)로 구성된다. Java에서 모듈은 보통 jar 파일,  
    컴포넌트는 war 파일이나 실행 가능한 jar 파일이다.  
    모듈 간의 의존성과 컴포넌트, 모듈 간의 조합 관계도 이 뷰에 포함된다.

  - **프로세스 뷰(Process view)** : 런타임 컴포넌트로 각 엘리먼트는 개별 프로세스이며,  
    IPC는 프로세스 간의 관계를 나타낸다.

  - **배포 뷰(Deployment view)** : 프로세스가 머신에 매핑되는 방법으로, 이 뷰의 엘리먼트는 물리 또는 가상 머신 및  
    프로세스이며, 머신 간의 관계가 바로 네트워킹이다. 프로세스와 머신 사이의 관계도 이 뷰에서 기술된다.

- 4개의 뷰 외에도 (4+1 모델의 +1에 해당하는 뷰) 뷰를 구동시키는 시나리오가 있다.  
  각 시나이로는 특정 뷰 내에서 얼마나 다양한 아키텍쳐 요소가 협동하여 요청을 처리하는지 기술한다.  
  가령 논리 뷰의 시나리오는 클래스가 협동하는 방법을, 프로세스 뷰의 시나리오는 프로세스가 서로 어떻게 협동하는지 나타낸다.

- 4+1 뷰 모델은 애플리케이션 아키텍쳐를 명쾌하게 표현하는 수단이다.  
  4개의 뷰는 중요한 아키텍쳐 측면을, 시나리오는 뷰의 여러 엘리먼트가 협동하는 과정을 명시한다.

<h3>아키텍쳐의 중요성</h3>

- 애플리케이션 요건은 크게 두 가지 종류로 나타낸다.  
  첫째, 애플리케이션이 할 일을 정의한 **기능 요건**이 있다. 보통 use case나 user story 포맷으로 기술하는데,  
  이 기능 요건과 아키텍쳐는 거의 무관하다. 기능 요건은 어느 아키텍쳐이든 구현할 수 있기 때문이다.  
  둘째, 이른바 _~성_ 으로 끝나는 **서비스 품질 요건**이 있다. 아키텍쳐는 바로 이 요건을 충족시킬 수 있게  
  설계해야 하므로 매우 중요하다. 서비스 품질 요건은 확장성, 신뢰성 같은 런타임 품질 외에도 관리성, 테스트성, 배포성 처럼  
  개발 시점의 품질도 해당된다. 애플리케이션 아키텍쳐를 어떻게 선택하느냐에 따라 이런 품질 요건을 얼마나 충족할 수 있을지가 결정된다.

<h4>아키텍쳐 스타일 개요</h4>
