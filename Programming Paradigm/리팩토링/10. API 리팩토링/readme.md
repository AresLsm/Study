# API 리팩토링

- 모듈과 함수는 소프트웨어를 구성하는 빌딩 블록이며, API는 이 블록들을 끼워 맞추는 연결부다.  
  이런 API를 이해하기 쉽고 사용하기 쉽게 만드는 일은 중요한 동시에 어렵기도 하다.  
  그래서 API를 개선하는 방법을 새로 깨달을 때마다 그에 맞게 리팩토링해야 한다.

- 좋은 API는 데이터를 갱신하는 함수와 그저 조회만 하는 함수를 명확히 구분한다.  
  두 기능이 섞여 있다면 **질의 함수와 변경 함수 분리하기**를 적용해 갈라놔야 한다.  
  값 하나 때문에 여러 개로 나뉜 함수들은 **함수 매개변수화하기**를 적용해 하나로 합칠 수 있다.  
  한편, 어떤 매개변수는 그저 함수의 동작 모드를 전환하는 용도로만 쓰이는데, 그럴 때는  
  **플래그 인수 제거하기**를 적용하면 좋다.

- 데이터 구조가 함수 사이를 건너 다니면서 필요 이상으로 분해될 때는 **객체 통째로 넘기기**를  
  적용해 하나로 유지하면 깔끔해진다. 무언가를 매개변수로 건네 피호출 함수가 판단할지, 아니면  
  호출 함수가 직접 정할지에 대해서는 진리가 없어 상황이 바뀌면 **매개변수를 질의함수로 바꾸기**와  
  **질의 함수를 매개변수로 바꾸기**로 균형점을 옮길 수 있다.

- 클래스는 대표적인 모듈이다. 객체는 되도록이면 불변이면 좋으므로 **세터 제거하기**를 적용하자.  
  한편, 호출자에 새로운 객체를 만들어 반환하려 할 때 일반적인 생성자만으로는 부족할 때가 있다.  
  이럴 땐 **생성자를 팩토리 함수로 바꾸기**가 좋다.

- 마지막 두 리팩토링은 수많은 데이터를 받는 복잡한 함수를 잘게 쪼개는 문제를 다룬다.  
  **함수를 명령으로 바꾸기**를 적용하면 이런 함수를 객체로 변환할 수 있는데, 그러면 해당 함수의  
  본문에서 **함수 추출하기**가 수월해진다. 나중에 이 함수를 단순화하여 명령 객체가 더는 필요  
  없어진다면 **명령을 함수로 바꾸기**를 적용해 함수로 되돌릴 수 있다.

<hr/>
