<h1>NestJS 프로젝트에 TypeORM 설치하기</h1>

<h2>준비 사항</h2>

- 이 프로젝트는 NestJS 프로젝트의 생성까지는 다루지 않는다.  
 NestJS CLI로 프로젝트를 생성했다고 가정하고 진행한다.
<hr/>

<h2>TypeORM 설치하기</h2>

- 우선 데이터베이스가 MariaDB이기 때문에 이에 맞는 패키지를 아래 명렁어로 설치하자.

```
yarn add @nestjs/typeorm typeorm mysql
```

- 위 패키지들은 NestJS 프로젝트에서 TypeORM을 사용하기 위해 필수로 필요한 패키지들이다.
<hr/>

<h2>데이터베이스 환경 설정하기</h2>

- 여느 백엔드 프레임워크와 마찬가지로 데이터베이스에 대해 CRUD 작업을 수행하려면  
  해당 데이터베이스의 주소, 포트 번호, 아이디, 비밀번호와 같은 환경 변수들을 설정해줘야 한다.

- TypeORM은 JSON 또는 TS 파일로 정해줄 수 있는데, 프로젝트의 최상위 위치에  
  `ormconfig.json` 또는 `ormconfig.ts`라는 파일을 생성하면 된다.  
  JSON을 선택한다면 JSON 형식대로 환경 변수를 설정해주면 되고, 나는 TS로 작성하였다.  
  이유는 아래와 같다.
  - 데이터 베이스 엔드포인트를 노출시키고 싶지 않다.
  - 데이터 베이스 아이디, 비밀번호를 노출시키고 싶지 않다.

* 우선 데이터베이스 연결에 필요한 정보들을 `.env` 파일에 작성하고  
  아래와 같이 작성한다.

```ts
// ormconfig.ts

module.exports = {
  port: 3306,
  host: process.env.DATASOURCE_URL,
  username: process.env.DATASOURCE_USERNAME,
  password: process.env.DATASOURCE_PASSWORD,
  database: "sangwoo",
  entities: ["dist/**/*.entity{.ts,.js}"],
  synchronize: false,
  type: "mariadb",
};
```

- 각 속성들은 보이는 그대로이며, 그 중 아래 2개를 보자.

  - `synchronize` : 정의되어 있는 도메인 클래스들 대로 DB상에 테이블을  
    구축할지 여부를 지정한다. 나의 경우 이미 테이블을 미리 만들어 놓은 상태이기 때문에  
    false로 지정했다.
  - `entities` : Entity 클래스들이 작성되어 있는 클래스들의 위치를 지정한다.  
    내 경우 `src/entities`의 하위에 있는데, 직접 작성하면 NestJS 프로젝트를  
    실행하는데에 실패했고, 위에 있는 값은 공식 문서에서 제공하는 값인데 잘 작동했다.

<hr/>

- Repository 클래스 설정하기
