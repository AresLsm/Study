# Managing access using IAM user groups and roles

## Managing multiple users with IAM user groups

- It's best practice to apply permissions to groups, instead of users.
- Default maximum limit of groups: 300
- A user can only be associated with maximum of 10 groups.

- A group can be attached maximum of 10 different policies at once.

---

## IAM Roles

- IAM Roles allow trusted Users, AWS services and applications to adopt a set of temporary IAM credentials  
  to access your AWS resources.

- Roles act as identities, much like Users do, and have permissions assigned to them defining what resources  
  the Roles can and can't access.

- Unlike users, IAM Roles are designed to be assumed by multiple different entities as and when required.

- Roles are used for temporary access to gain access to resources, and each time the role is assumed by a User,  
  an AWS service or an application, a new set of credentials is dynamically created for the duration of that session.  
  As a result, Roles do not have any long term credentials associated, so there is no password for console access,  
  nor are there any access keys for programmatic access that are explicitly associated with the Role.

- Roles are generally uses in the following cases:

  - If you need to grant temporary access for Users to AWS resources that they don't normally require access to.
  - To grant access for an IAM User in one account to access resources in another AWS account
  - If an AWS service needs to access resources on your behalf or if an application requires access to resources.
  - To alllow access to specific resources for federated users.

- Roles can be assumed by the following:

  - A user that's in the same AWS account as the where the Role has been created.
  - User in a different AWS account than where the Role has been created.
  - AWS service (such as EC2)
  - External federated users to your AWS account.

---

## Using AWS Service Roles to access AWS resources on your behalf

- AWS Service Role allows an AWS service to assume a role to access other AWS resources within your own account  
  on your behalf. This is commonly used for EC2 instances, whereby you could create a role for an EC2 instance  
  to assume to gain access to AWS resources on your behalf.

- EC2 instance에서 S3를 사용하는 상황을 보자. Programmatic access로 access key와 secret access key를 가진 Iam User를  
  만들고, 정보를 EC2에 직접 설정하는 대신 AWS Service Role을 활용하면 쉽게 설정할 수 있다.

  - 이렇게 EC2 instance에 service role을 부여하는 건 instance를 생성할 때도 가능하고, 이미 실행 중인 instance에 대해서도 부여할 수 있다.
  - EC2 fleet에 대해서 일괄 적용할 때도 편리하다.

- It is always a best practice to associate a role to an EC2 instance for accessing AWS resources.

### Service-linked Roles

- A number of different AWS services require roles to perform functions requiring very spcific permissions,  
  and in these instances AWS allows you to create Service-Linked Roles.

- These are often created the first time that you use a service.

- Service-linked Roles come pre-configured with the relevant AWS Managed policies, trusts and permissions  
  allowing only that Service to carry out the required operations with other AWS resources that it needs to interact with.

- You cannot edit policies attached to Service-linked Roles.

- AWS Service roles allow you to apply your own customer managed or AWS Managed policies, whereas service-linked roles  
  come pre-configured with a specific set of read-only AWS managed policies that can only be used by that particular service.

---
