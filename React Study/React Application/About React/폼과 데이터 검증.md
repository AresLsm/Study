폼과 데이터 검증
======

* 폼(form)은 app이 사용자로부터 데이터를 수집할 수 있게 한다.

* 폼과 데이터 검증의 맥락 잡기
<table>
    <tr>
        <td>그게 무엇인가?</td>
        <td>form은 app이 사용자로부터 데이터를 받을 수 있게 하는 기본 메커니즘이다. 검증은 데이터를 검사함으로써 app에 사용할 수 있음을 보장하는 과정이다.</td>
    </tr>
    <tr>
        <td>왜 유용한가?</td>
        <td>대부분의 app은 이메일 주소나 결제 정보, 또는 배송 주소 등 어느 정도 사용자로부터의 데이터를 필요로 한다. form은 사용자가 자유 형식의 텍스트를 입력하거나 정해진 사항을 선택해 데이터를 처리할 수 있게 한다. 검증은 데이터가 app이 처리할 수 있는 형태인지 보장한다.</td>
    </tr>
    <tr>
        <td>어떻게 사용하는가?</td>
        <td>제어할 수 있는 form element를 알아야 한다. 값 설정은 value나 checked prop으로 할 수 있으며, 사용자의 편집이나 선택은 변경 이벤트를 처리함으로써 가능하다. 이는 검증 기능에도 사용된다.</td>
    </tr>
</table>

</hr>

```js
// src/Editor.js
import React, {Component} from 'react';

export class Editor extends Component {
    render() {
        return <div className="h5 bg-info text-white p-2">
            Form Will Go Here
        </div>
    }
}
```
* 위 컴포넌트는 사용자에게 form을 보여주기 위해 사용될 것이다.

```js
// src/Display.js
import React, {Component} from 'react';

export class Display extends Component{

    formatValue = (data) => Array.isArray(data) ? data.join(", ") : data.toString();

    render() {
        let keys = Object.keys(this.props.data);
        if(keys.length === 0) {
            return <div className="h5 bg-secondary p-2 text-white">
                No Data
            </div>
        } else {
            return <div className="container-fluid bg-secondary p-2">
                {keys.map(key => 
                    <div key={key} className="row h5 text-white">
                        <div className="col">{key}:</div>
                        <div className="col">
                            {this.formatValue(this.props.data[key])}
                        </div>
                    </div>
                )}
                </div>
        }
    }
}
```
* 위 컴포넌트는 __data__ prop을 받아 그 프로퍼티들과 값들을 grid에 열거한다.

```js
// src/App.js
import React, {Component} from 'react';
import {Editor} from './Editor';
import {Display} from './Display';

export default class App extends Component {
  constructor(props){
    super(props);
    this.state={
      formData:{}
    }
  }

  submitData = (newData) => {
    this.setState({formData:newData});
  }

  render() {
    return (
      <div className="container-fluid">
        <div className="row p-2">
          <div className="col-6">
            <Editor submit={this.submitData} />
          </div>
          <div className="col-6">
            <Display data={this.state.formData}/>
          </div>
        </div>
      </div>
    )
  }
}
```
<hr/>

<h2>Form Element의 사용</h2>

* Form Element를 사용하는 가장 간단한 방법은 상태와 이벤트 등을 사용해   
  React의 영역 안에 구현하는 것이다.
* 이를 __제어 컴포넌트(Controlled Component)__ 라 한다.
```js
// src/Editor.js
import React, {Component} from 'react';

export class Editor extends Component {

    constructor(props) {
        super(props);
        this.state={
            name:""
        }
    }

    updateFormValue = (event) => {
        this.setState({[event.target.name]:event.target.value},
            () => this.props.submit(this.state));
    }

    render() {
        return <div className="h5 bg-info text-white p-2">
            <div className="form-group">
                <label>Name</label>
                <input className="form-control"
                    name="name"
                    value={this.state.name}
                    onChange={this.updateFormValue}/>
            </div>
        </div>
    }
}
```
* input element의 value 속성은 name 상태 프로퍼티로 설정하며, 그 값이 변경되면   
  onChange prop에 지정된 updateFormValue 메소드를 사용해 처리한다.
* 대부분의 form은 복수의 필드를 필요로 한다. 따라서 각 필드를 위한 서로 다른   
  이벤트 핸들러를 정의하기보다는, 하나의 메소드를 사용하고 해당 form element가   
  자신과 관련된 상태값을 나타낼 수 있게 하는 방법이 낫다.
```js
updateFormValue = (event) => {
    this.setState({ [event.target.name]: event.target.value},
        () => this.props.submit(this.state));
}
```
* 대괄호 ([ ]) 안의 컨텐츠는 __상태 갱신을 위한 프로퍼티 이름을 얻기 위해__ 사용된다.   
  이는 setState 메소드 내에서 event.target 객체의 name 프로퍼티를 사용할 수 있게 한다.
* setState 메소드가 제공하는 콜백 옵션을 사용함으로써 __상태 데이터가 갱신된 다음에 submit__   
  __함수 prop을 호출하게 했다는 점__ 을 주목하자. 이로써 form data가 부모 컴포넌트에 전달된다.
<hr/>

<h3>select element</h3>

* p.569 
