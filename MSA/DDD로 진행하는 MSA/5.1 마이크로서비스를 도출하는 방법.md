# 마이크로서비스를 도출하는 방법

- 마이크로서비스가 비즈니스의 속도 변화를 지원하면서 독립적으로 변경 및 배포되려면 각 마이크로서비스가  
  다른 서비스와 의존하지 않도록 해야한다. 따라서 시스템의 어떤 비즈니스 기능들을 묶어서 독립적인  
  마이크로서비스로 도출할 것인가를 결정하는 것이 매우 중요하다.

<h2>비즈니스 능력에 근거한 도출</h2>

- 마이크로서비스를 식별하는 가장 쉬운 방법은 경험적인 원칙을 적용하는 것이다. 각 도메인에서는  
  비즈니스가 규정하는 일하는 방식과 조직, 부서 체계가 이미 정의돼 있고, 이러한 부서는 이미 업무  
  처리에서의 응집성을 가지고 있고 타 부서와의 의존도는 낮을 것이다. 이처럼 비즈니스 부서가 가진  
  역할, 처리 능력을 체계적으로 분해할 수 있으며, 보통 이를 업무 기능 분해라고 한다. 업무 기능 분해는  
  업무 흐름에 따라 업무를 최상위에서 하위까지 대, 중, 소의 크기로 분리하고 수행하는 일들을 체계적으로  
  정렬한다. 그 결과, 각 서비스는 특정 부서가 처리하는 업무 역할과 비슷해진다. 대, 중, 소의 관계 예시는  
  주문(대) -> 주문 관리(중) -> 주문처리, 주문이력(소)이다.

- 이 방식은 전체적인 대략의 비즈니스를 이해할 때는 유용하지만, 서비스 간의 관계를 파악하거나 서비스의  
 구체 기능과 연관된 서비스가 관리할 독립적인 데이터를 식별하기에는 미흡하다.
<hr/>

<h2>DDD의 Bounded Context 기반 도출</h2>

- 비즈니스 능력에 따른 서비스 도출의 한계를 보완하기 위해 DDD의 전략적 설계를 이용할 수 있다.  
  마이크로서비스는 각 저장소를 독립적으로 보유하고, 각 데이터는 다른 서비스에서 직접적으로 참조해서는  
  안되는 특성이 있다. 이러한 특성이 기존 SOA 방식과는 다르게 서비스를 독립적으로 수정 및 배포할 수 있는  
  장점으로 작용한다.

- 따라서 마이크로서비스를 도출할 때 **서비스가 소유권을 가진 데이터를 독립적으로 식별하는 것**이 중요하다.  
  서비스가 보유한 기능에 의해서만 접근 가능한(캡슐화) 데이터를 파악할 필요가 있는 것이다.  
  그렇지만 위의 기능 분해 방식은 서비스가 소유해야할 데이터 식별에 적합하지 않고, 기능과 데이터가 분리되고  
  하나의 통합 데이터가 여러 기능에서 사용되도록 모델링되는 방식이다. 따라서 비즈니스를 처리하는 기능과  
  그 기능에 영향을 받는 데이터가 분리되는 경향이 있다.

- 하지만 DDD는 이처럼 데이터를 기능과 분리해서 식별하지 않고 문제 영역인 하위 도메인마다 별도의 도메인 모델로  
  정의한다. 도메인 모델은 각 업무에 특화된 유비쿼터스 언어로 정의되고, 그 업무에 특화된 개념으로 구성된다.

- 이러한 특성이 독립적인 팀이 자율적으로 마이크로서비스를 개발 및 운영하는 마이크로서비스의 개념과 매우 잘  
  어울렸고, 도메인 모델을 소유한 Bounded Context를 중심으로 마이크로서비스를 도출하는 가이드로  
  사용될 수 있다.

> `Bounded Context`: 분리된 도메인 모델에 의해 다른 컨텍스트와 구별되는 경계

<hr/>
