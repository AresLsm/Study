# Fixture 수정하기

- 지금까지 작성한 테스트 코드를 통해 fixture를 불러와 그 속성을 확인하는 방법을  
  알 수 있었다. 그런데, 실전에서는 사용자가 값을 변경하면서 fixture의  
  내용도 수정되는 경우가 흔하다.

- 이러한 수정의 대부분은 setter에서 이뤄지는데, setter는 보통 아주 단순하여 버그가  
  생길일도 없으니 잘 테스트하지 않는다. 하지만 `Producer`의 `production()` setter는  
  좀 복잡한 동작을 수행하기 때문에 테스트해볼 필요가 있다.

```js
it("change production", () => {
  asia.producers[0].production = 20;
  expect(asia.shortfall).equal(-6);
  expect(asia.profit).equal(292);
});
```

- 흔히 보는 패턴이다. `beforeEach` 블록에서 *설정*한 표준 fixture를 취해서,  
  테스트를 *수행*하고, 이 fixture가 일을 기대한 대로 처리했는지를 _검증_ 한다.  
  이 패턴을 설정-실행-검증, 조건-발생-결과, 준비-수행-단언 등으로 부른다.  
  이 3가지 단계가 한 테스트안에 모두 담겨져 있을 수도 있고, 초기 작업 중 공통되는  
  부분을 `beforeEach`와 같은 표준 설정 루틴에 모아서 처리하기도 한다.

> _해체_ 혹은 _청소_ 라고 하는 네 번째 단계도 있는데 명시적으로 언급하지는 않을 때가 많다.  
>  해체 단계에서는 fixture를 제거하여 테스트들이 서로 영향을 주지 못하게 막는다.

- 이 테스트는 `it` 구문 하나에 두 가지 속성을 검증하고 있다.  
  일반적으로는 `it` 구문 하나 당 검증도 하나씩만 하는게 좋다. 앞쪽 검증을 통과하지 못하면  
  나머지 검증은 실행해보지도 못하고 테스트가 실패하게 되는데, 그러면 실패 원인을 파악하는 데  
  유용한 정보를 놓치기 쉽기 때문이다. 여기서는 한 테스트로 묶어도 문제되지 않을 정도로  
  두 속성이 밀접하다고 판단하여 이렇게 작성했다. 별개의 `it` 구문으로 나누고 싶다면  
  언제든지 나눌 수 있다.

<hr/>
