# 자가 테스트 코드의 가치

- 리팩토링은 분명 가치 있는 도구지만, 그것만으로는 부족하다.  
  리팩토링을 제대로 하려면 불가피하게 저지르는 실수를 잡아주는 견고한 Test suite가  
  뒷받침되어야 한다. 자동 리팩토링 도구를 활용하더라도 이 책에서 소개하는 리팩토링 기법들 중  
  다수는 test suite로 재차 검증해야 할 것이다.

- 이게 단점은 아니다. 리팩토링을 하지 않더라도 좋은 테스트를 작성하는 일은 개발 효율을  
  높여준다. 테스트 작성에 시간을 빼앗기는데 효율을 높여준다는게 어색하지만,  
  효율이 어떻게 좋아지는지 살펴보자.

<h2>자가 테스트 코드의 가치</h2>

- 개발자들이 어떻게 일하는지 살펴보면 실제로 코드를 작성하는 시간의 비중은 그렇게 크지 않음을  
  발견할 수 있다. 현재 상황을 파악하기도 하고, 설계를 고민하기도 한다. 물론 대부분의  
  시간은 디버깅에 쓴다. 버그 수정 자체는 대체로 금방 끝나지만, 문제는 그 버그를 찾는  
  과정이다. 또한 버그를 잡는 과정에서 또다른 버그를 심기도 하는데, 그 사실을 한참이 지나서야  
  알아채기도 한다. 그래서 또다시 그 버그를 찾느라 수많은 시간을 날린다.

- 테스트 코드를 활용하면 프로그램이 제대로된 값을 출력하는지, 제대로 작동하는지를  
  확인하는 작업을 컴퓨터에게 맡길 수 있다. 개발자는 테스트가 성공했는지 확인하려면  
  의도한 결과와 테스트 결과가 같은지만 비교하면 된다.

> 모든 테스트를 완전히 자동화하고 그 결과까지 스스로 검사하게 만들자.

- 이렇게 하면 컴파일 때마다 테스트를 실행히킬 수 있고, 곧바로 생산성이 급상승한다.  
  디버깅 시간의 감소로 이어지기 때문이다. 테스트를 자주 수행할 수록 버그가 발생한  
  지점을 찾아내기 쉽다.

> Test suite는 강력한 버그 검출 도구로, 버그를 찾는데 걸리는 시간을 대폭 줄여준다.

- 테스트를 작성하기 가장 좋은 시점은 프로그래밍을 시작하기 전이다.  
  기능을 추가해야할 때 테스트부터 작성해보자. 테스트를 작성하다보면 원하는 기능을 추가하기 위해  
  무엇이 필요한지 고민하게 된다. 구현보다 인터페이스에 집중하게 된다는 장점도 있다.  
  게다가 코딩이 완료되는 시점을 정확하게 판단할 수 있다. 테스트를 모두 통과한 시점이 바로  
  코드를 완성한 시점이다.

- 이처럼 테스트부터 작성하는 습관을 TDD(테스트 주도 개발)이라 한다.  
  TDD에서는 처음에는 통과하지 못할 테스트를 작성하고, 이 테스트를 통과하게끔 코드를 작성하고,  
  결과 코드를 최대한 깔끔하게 리팩토링하는 과정을 짧은 주기로 반복해간다.  
  이렇게 테스트-코딩-리팩토링 과정을 한 시간에도 여러 차례 진행하기 때문에 코드를 대단히  
  생산적이면서도 차분하게 작성할 수 있다.

- 리팩토링에는 테스트가 필요하다. 그러니 리팩토링하고 싶다면 반드시 테스트를 작성하자.

<hr/>
