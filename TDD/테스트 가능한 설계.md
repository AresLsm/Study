<h1>테스트 가능한 설계</h1>

<h2>테스트가 어려운 코드</h2>

* 모든 코드를 테스트할 수 있는 것은 아니다. 개발을 진행하다 보면 테스트하기 어려운 코드를 만나게 된다.

<h3>하드 코딩된 경로</h3>

* 일부 테스트에는 파일 경로, IP주소, 포트번호가 하드코딩 되어 있는 경우가 있다. 이들은 테스트를 어렵게 만든다.
```java
public class PaySync {
    private PayInfoDao payInfoDao = new PayInfoDao();

    public void sync() throws IOException {

        Path path = Paths.get("D:\\data\\pay\\cp1.csv");
        List<PayInfo> payInfos = Files.line(path)
            .map(line -> {
                String[] data = line.split(",");
                PayInfo payInfo = new PayInfo(
                    data[0], data[1], Integer.parseInt(data[2])
                );
                return payInfo;
            })
            .collect(Collectors.toList());
            payInfos.forEach(pi -> payInfoDao.insert(pi));
    }
}
```

<h3>의존 객체를 직접 생성</h3>

* 위 테스트를 어렵게 만드는 또 다른 요인은 의존 대상(`PayInfoDao`)을 직접 생성하고 있다는 것이다.   
  이 코드를 테스트하려면 `PayInfoDao`가 올바르게 동작하는데 필요한 모든 환경을 구성해야 한다.   
  DB를 준비해야 하고 필요한 테이블도 만들어야 한다.

* 테스트를 실행하면 데이터가 DB에 추가되므로 같은 테스트를 다시 실행하기 전에 기존에 들어간 데이터를 삭제해야 한다.   
  그렇지 않으면 중복 데이터로 인해 데이터 삽입에 실패하게 된다.

<h3>정적 메소드 사용</h3o>

* 정적 메소드를 사용해도 테스트가 어려워질 수 있다. 아래 코드를 보자.
```java

```